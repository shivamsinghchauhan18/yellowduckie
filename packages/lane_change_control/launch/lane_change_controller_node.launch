<launch>
    <arg name="veh" default="$(env VEHICLE_NAME)"/>
    <arg name="pkg_name" value="lane_change_control"/>
    <arg name="node_name" default="lane_change_controller_node"/>
    
    <group ns="$(arg veh)">
        <node name="$(arg node_name)" pkg="$(arg pkg_name)" type="lane_change_controller_node.py" output="screen" clear_params="true">
            <!-- Vehicle name parameter -->
            <param name="~veh_name" value="$(arg veh)"/>
            
            <!-- Timing parameters -->
            <param name="~signal_duration" value="2.0"/>
            <param name="~max_maneuver_time" value="8.0"/>
            <param name="~assessment_timeout" value="3.0"/>
            
            <!-- Safety parameters -->
            <param name="~min_feasibility_score" value="0.7"/>
            <param name="~lateral_acceleration_limit" value="0.5"/>
            <param name="~safe_following_distance" value="1.5"/>
            
            <!-- Geometry parameters -->
            <param name="~lane_width" value="0.6"/>
            <param name="~lateral_clearance" value="0.1"/>
            
            <!-- Topic remappings -->
            <remap from="~lane_pose" to="/$(arg veh)/lane_filter_node/lane_pose"/>
            <remap from="~vehicle_detections" to="/$(arg veh)/vehicle_detection_node/centers"/>
            <remap from="~safety_override" to="/$(arg veh)/safety_system_node/emergency_status"/>
        </node>
    </group>
</launch>